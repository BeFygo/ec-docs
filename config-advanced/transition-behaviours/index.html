<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Transition Behaviours (Experimental) - Entity Controller Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Transition Behaviours (Experimental)";
    var mkdocs_page_input_path = "config-advanced\\transition-behaviours.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Entity Controller Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Getting Started</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../intro/installation/">Installation</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../intro/core-functionality/">Core Functionality</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Background</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../intro/state-meanings/">EC States</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../intro/entity-types/">Entity Types</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../intro/sensor-types/">Sensor Types</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../intro/state-entities/">State Entites</a>
                </li>
    </ul>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Configuration</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="#">Basic</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../config-basic/time-constraints/">Time Constraints</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../config-basic/night-mode/">Night Mode</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../config-basic/override-entities/">Override Entities</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../config-basic/stay-mode/">Stay Mode</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="#">Advanced</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../">Intro</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../custom-params/">Customize Service Calls</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../custom-scripts/">Trigger Custom Scripts</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../backoff/">Delay Backoff</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="./">Transition Behaviours (Experimental)</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#supported-transition-points">Supported transition points:</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#supported-transition-behaviours">Supported transition behaviours:</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../services/">EC Services</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../block-timeout/">Block Mode Timeout</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Special Use Cases</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../special/ignore-state-attributes/">Ignore State Attribute Changes</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../special/state-strings/">Custom State strings</a>
                </li>
    </ul>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">About</span></p>
                <ul>
                    <li class="toctree-l1"><a class="" href="https://ec-demo.danielbkr.net">Demo</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="https://danielbkr.net">Blog</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="https://github.com/danobot/entity-controller/blob/master/COPYING">License</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="https://github.com/danobot/entity-controller">Github</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="https://github.com/danobot/entity-controller/blob/master/CHANGELOG.md">Release Notes</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../intro/contributions/">Contributions</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Entity Controller Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Advanced &raquo;</li>
        
      
        
          <li>Configuration &raquo;</li>
        
      
    
    <li>Transition Behaviours (Experimental)</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/danobot/ec-docs/edit/master/docs/config-advanced/transition-behaviours.md"> Edit on ec-docs</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h3 id="transition-behaviours-beta">Transition Behaviours (beta)</h3>
<p>Transition Behaviours allow you to define what EC should do at these transition points.</p>
<p><strong>Use Case:</strong></p>
<blockquote>
<p>One use case for this is when lights turn on just before the end of the active period and then they never turn off because EC is constrained. For me, the light would be triggered by me walking into a room at 
7am and the constrain period would begin at 7:16am. Since the light duration is 20 minutes, EC will never turn off the light because it is in <code>constrained</code> state at 7:20am. This is annoying because the lights stay on all day. I can use <code>on_enter_constrained: "off"</code> to turn off all lights at 7:16am (when the EC is constrained).</p>
</blockquote>
<pre><code>transition_behaviours:   # light triggers on then off
    entities: 
      - input_boolean.lamp
    sensors:
      - sensor.motion_sensor
    overrides:
      - input_boolean.override_switch
    delay: 5
    behaviours:
      on_enter_constrained: &quot;on&quot;
    start_time: sunset
    end_time: &quot;7:16:00&quot;
</code></pre>

<p><strong>Notes about light flicker:</strong> This can cause light flicker particularly for the <code>on_exit_*</code> behaviours. If your lights flicker, make sure you understand how this configuration is impacting them and use the <code>on_enter_*</code> behaviours instead.</p>
<h4 id="supported-transition-points">Supported transition points:</h4>
<p>The following behaviours can be defined using the values <code>"on"</code>, <code>"off"</code> and the default being <code>"ignore"</code>. These must be in quotes to avoidconflicts with YAML truth values.</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>on_enter_idle</td>
<td></td>
</tr>
<tr>
<td>on_exit_idle</td>
<td></td>
</tr>
<tr>
<td>on_enter_active</td>
<td></td>
</tr>
<tr>
<td>on_exit_active</td>
<td></td>
</tr>
<tr>
<td>on_enter_overridden</td>
<td></td>
</tr>
<tr>
<td>on_exit_overridden</td>
<td></td>
</tr>
<tr>
<td>on_enter_constrained</td>
<td></td>
</tr>
<tr>
<td>on_exit_constrained</td>
<td></td>
</tr>
<tr>
<td>on_enter_blocked</td>
<td></td>
</tr>
<tr>
<td>on_exit_blocked</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="supported-transition-behaviours">Supported transition behaviours:</h4>
<p>You must put these in quotes.</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>"on"</td>
<td>Control entities will be explicitly turned on.</td>
</tr>
<tr>
<td>"off"</td>
<td>Control entities will be explicitly turned off.</td>
</tr>
<tr>
<td>"ignore"</td>
<td>(default) Nothing special will happen (control left to state machine)</td>
</tr>
</tbody>
</table>
<pre><code class="yaml">  mtn_outside:
    sensor: 
      - binary_sensor.mtn_kitchen
    entities:
      - light.kitchen_led
    state_entities:
      - light.outside_light
    delay: 1200
    start_time: '18:00:00'
    end_time: '07:00:00'
    end_time_action: &quot;off&quot;                   # will turn off all control entities at 7am if they are on.
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../services/" class="btn btn-neutral float-right" title="EC Services">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../backoff/" class="btn btn-neutral" title="Delay Backoff"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../backoff/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../services/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
